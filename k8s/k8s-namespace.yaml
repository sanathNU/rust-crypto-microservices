apiVersion: batch/v1
kind: Job
metadata:
  name: bench-suite-baseline
  namespace: pq-zk-bench
spec:
  ttlSecondsAfterFinished: 3600
  template:
    spec:
      containers:
      - name: bench-client
        # UPDATE THIS: Replace with your registry path
        # Example: us-central1-docker.pkg.dev/YOUR_PROJECT/pq-zk-bench/bench-client:v1
        image: REGISTRY/bench-client:v1
        args:
        - "suite"
        - "--lattice-url"
        - "http://lattice-service:8000"
        - "--zk-url"
        - "http://zk-service:8001"
        - "--kem-iterations"
        - "500"
        - "--zk-iterations"
        - "50"
        - "--label"
        - "gke-baseline-1replica"
        resources:
          requests:
            cpu: "100m"
            memory: "128Mi"
          limits:
            cpu: "250m"
            memory: "256Mi"
      restartPolicy: Never
  backoffLimit: 2